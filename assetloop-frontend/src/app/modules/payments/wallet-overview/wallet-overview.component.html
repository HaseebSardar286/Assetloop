<div class="wallet-card">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h3 class="mb-0">Wallet Balance</h3>
    <button 
      class="btn btn-sm btn-outline-primary" 
      (click)="loadWallet()" 
      [disabled]="loading"
      title="Refresh wallet balance"
    >
      <i class="fas fa-sync-alt" [class.fa-spin]="loading"></i> Refresh
    </button>
  </div>
  <div *ngIf="loading" class="mb-2">
    <div class="spinner-border spinner-border-sm" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  <div class="alert alert-danger" *ngIf="error">{{ error }}</div>
  <p class="balance">PKR {{ currentBalance | number : "1.0-0" }}</p>
</div>
<div class="section">
  <h4>Pending Payments</h4>
  <ul class="list-group">
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
      *ngFor="let payment of pendingPayments"
    >
      <span class="text-capitalize">{{ payment.type }}</span>
      <span class="badge bg-secondary">{{ payment.date }}</span>
      <span class="badge bg-primary"
        >PKR {{ payment.amount | number : "1.0-0" }}</span
      >
    </li>
    <li class="list-group-item" *ngIf="!pendingPayments.length && !loading">
      None
    </li>
  </ul>
</div>
<div class="section">
  <h4>Earnings/Refunds</h4>
  <ul class="list-group">
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
      *ngFor="let earning of earningsRefunds"
    >
      <span class="text-capitalize">{{ earning.type }}</span>
      <span
        [ngClass]="{
          'badge bg-success': earning.status === 'successful',
          'badge bg-warning text-dark': earning.status === 'pending',
          'badge bg-danger': earning.status === 'failed'
        }"
      >
        {{ earning.status }}
      </span>
      <span class="badge bg-primary"
        >PKR {{ earning.amount | number : "1.0-0" }}</span
      >
    </li>
    <li class="list-group-item" *ngIf="!earningsRefunds.length && !loading">
      None
    </li>
  </ul>
</div>
<div class="quick-actions">
  <div class="input-group mb-2" style="max-width: 320px">
    <span class="input-group-text">PKR</span>
    <input
      class="form-control"
      type="number"
      [(ngModel)]="addWithdrawAmount"
      placeholder="Amount (min: PKR 1)"
      min="1"
      step="1"
    />
  </div>
  <button
    class="btn btn-success me-2"
    (click)="addMoney()"
    [disabled]="loading || addWithdrawAmount < 1"
    title="Minimum amount is PKR 1.00"
  >
    Add Money
  </button>
  <button
    class="btn btn-warning me-2"
    (click)="withdraw()"
    [disabled]="loading || addWithdrawAmount <= 0"
  >
    Withdraw
  </button>
  <a class="btn btn-info" routerLink="/payments/history">Transaction History</a>
</div>
