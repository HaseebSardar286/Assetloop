<div class="d-flex flex-column vh-100">
  <app-header (logout)="onLogout()"></app-header>
  <!-- Main Content -->
  <div class="d-flex flex-grow-1">
    <app-renter-side-bar></app-renter-side-bar>
    <main class="flex-grow-1 p-4 bg-light">
      <h2 class="mb-4">My Profile</h2>
      <div class="row">
        <div class="col-md-4">
          <div class="card text-center p-3 mb-4">
            <div
              class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
              style="width: 100px; height: 100px; margin: 0 auto"
            >
              <h2 class="m-0">
                {{ user.firstName.charAt(0) }}{{ user.middleName?.charAt(0)
                }}{{ user.lastName.charAt(0) }}
              </h2>
            </div>
            <h5 class="mt-3">
              {{ user.firstName }} {{ user.middleName }} {{ user.lastName }}
            </h5>
            <p class="text-muted">{{ user.email }}</p>
            <button class="btn btn-primary w-100">Log Out</button>
          </div>
          <div class="card p-3">
            <h6>Account Status</h6>
            <p>
              <strong>Member Since:</strong> {{ accountStatus.memberSince }}
            </p>
            <p><strong>Bookings:</strong> {{ accountStatus.bookings }}</p>
            <p><strong>Reviews:</strong> {{ accountStatus.reviews }}</p>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card p-4">
            <ul class="nav nav-tabs mb-2 gap-1" id="myTab" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="profile-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#profile"
                  type="button"
                  role="tab"
                  aria-controls="profile"
                  aria-selected="true"
                >
                  Profile Information
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="change-password-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#change-password"
                  type="button"
                  role="tab"
                  aria-controls="change-password"
                  aria-selected="false"
                >
                  Change Password
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="notification-settings-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#notification-settings"
                  type="button"
                  role="tab"
                  aria-controls="notification-settings"
                  aria-selected="false"
                >
                  Notification Settings
                </button>
              </li>
            </ul>
            <div class="tab-content" id="myTabContent">
              <div
                class="tab-pane fade show active"
                id="profile"
                role="tabpanel"
                aria-labelledby="profile-tab"
              >
                <form>
                  <div class="mb-3">
                    <div class="col">
                      <label>First Name</label>
                      <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="user.firstName"
                        name="firstName"
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <div class="col">
                      <label>Last Name</label>
                      <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="user.lastName"
                        name="lastName"
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <label>Email</label>
                    <input
                      type="email"
                      class="form-control"
                      [(ngModel)]="user.email"
                      name="email"
                      readonly
                    />
                  </div>
                  <div class="mb-3">
                    <label>Phone Number</label>
                    <input
                      type="tel"
                      class="form-control"
                      [(ngModel)]="user.phoneNumber"
                      name="phoneNumber"
                    />
                  </div>

                  <button
                    type="button"
                    class="btn btn-primary w-100"
                    (click)="onSaveChanges()"
                  >
                    Save Changes
                  </button>
                </form>
              </div>
              <div
                class="tab-pane fade"
                id="change-password"
                role="tabpanel"
                aria-labelledby="change-password-tab"
              >
                <div class="mb-4">
                  <h5 class="mb-3">Change Password</h5>
                  <div class="mb-3">
                    <label for="previousPassword" class="form-label"
                      >Previous Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="previousPassword"
                      [(ngModel)]="passwordData.previousPassword"
                      placeholder="Enter previous password"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="newPassword" class="form-label"
                      >New Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="newPassword"
                      [(ngModel)]="passwordData.newPassword"
                      placeholder="Enter new password"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="confirmPassword" class="form-label"
                      >Confirm Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="confirmPassword"
                      [(ngModel)]="passwordData.confirmPassword"
                      placeholder="Confirm new password"
                      required
                    />
                  </div>
                  <button class="btn btn-primary" (click)="changePassword()">
                    Change Password
                  </button>
                  <div
                    *ngIf="error"
                    class="alert alert-danger mt-2"
                    role="alert"
                  >
                    {{ error }}
                    <button
                      type="button"
                      class="btn-close"
                      (click)="error = null"
                    ></button>
                  </div>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="notification-settings"
                role="tabpanel"
                aria-labelledby="notification-settings-tab"
              >
                <div class="container">
                  <div class="settings-container card p-4 shadow-sm">
                    <h2 class="card-title mb-4">Notification Settings</h2>

                    <!-- Notification Channels -->
                    <div class="mb-4">
                      <h5 class="mb-3">Notification Channels</h5>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="emailEnabled"
                          [(ngModel)]="settings.emailEnabled"
                        />
                        <label class="form-check-label" for="emailEnabled"
                          >Email</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="smsEnabled"
                          [(ngModel)]="settings.smsEnabled"
                        />
                        <label class="form-check-label" for="smsEnabled"
                          >SMS</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="inAppEnabled"
                          [(ngModel)]="settings.inAppEnabled"
                        />
                        <label class="form-check-label" for="inAppEnabled"
                          >In-App</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="pushEnabled"
                          [(ngModel)]="settings.pushEnabled"
                        />
                        <label class="form-check-label" for="pushEnabled"
                          >Push</label
                        >
                      </div>
                    </div>

                    <!-- Notification Types -->
                    <div class="mb-4">
                      <h5 class="mb-3">Notification Types</h5>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="newBookings"
                          [(ngModel)]="settings.newBookings"
                        />
                        <label class="form-check-label" for="newBookings"
                          >New Booking Requests</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          type="checkbox"
                          class="form-check-input"
                          id="bookingConfirmations"
                          [(ngModel)]="settings.bookingConfirmations"
                        />
                        <label
                          class="form-check-label"
                          for="bookingConfirmations"
                          >Booking Confirmations</label
                        >
                      </div>
                      <!-- Add more notification types as needed -->
                    </div>

                    <!-- Frequency -->
                    <div class="mb-4">
                      <h5 class="mb-3">Frequency</h5>
                      <select
                        class="form-select"
                        [(ngModel)]="settings.frequency"
                        aria-label="Frequency"
                      >
                        <option value="immediate">Immediate</option>
                        <option value="daily">Daily Digest</option>
                        <option value="weekly">Weekly Digest</option>
                      </select>
                    </div>

                    <!-- Reminder Threshold -->
                    <div class="mb-4">
                      <h5 class="mb-3">Reminder Threshold (Days)</h5>
                      <input
                        type="number"
                        class="form-control"
                        [(ngModel)]="settings.reminderThreshold"
                        min="1"
                        aria-label="Reminder Threshold"
                      />
                    </div>

                    <!-- Save Button -->
                    <button class="btn btn-primary" (click)="saveSettings()">
                      Save Settings
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
